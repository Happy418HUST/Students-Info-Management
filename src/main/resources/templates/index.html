<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Students' Information Management</title>
    <!-- css -->
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet" />
    <link th:href="@{/css/bootstrap-table.css}" rel="stylesheet" />
    <link th:href="@{/css/bootstrap-datetimepicker.min.css}" rel="stylesheet" />
    <link th:href="@{/css/style.css}" rel="stylesheet" />
</head>
<body>
<h2 align="center">学生信息管理系统</h2>
<div class="whole">
    <!--查询-->
    <div class="panel panel-default">
        <div class="panel-heading">查询条件</div>
        <div class="panel-body">
            <form id="formSearch" class="form-horizontal">
                <div class="form-group" style="margin-top:15px">
                    <label class="control-label col-sm-1" for="search_name">姓名</label>
                    <div class="col-sm-3">

                        <input type="text" class="form-control" id="search_name">
                    </div>
                    <label class="control-label col-sm-1" for="search_major">专业</label>
                    <div class="col-sm-3">

                        <input type="text" class="form-control" id="search_major">
                    </div>
                    <div class="col-sm-4" style="text-align:left;">

                        <button type="button" id="btn_query" class="btn btn-primary">查询</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!--增删改按钮-->
    <div class="bs-bars pull-left">
        <div id="toolbar" class="btn-group">

            <button id="btn_add" type="button" class="btn btn-info" data-toggle="modal" data-target="#modal_add">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
            </button>

            <button id="btn_edit" type="button" class="btn btn-warning" data-toggle="modal" data-target="#modal_edit">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
            </button>

            <button id="btn_delete" type="button" class="btn btn-danger" data-toggle="modal" data-target="#modal_del">
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
            </button>
        </div>
    </div>
    <!--“新增”对话框-->
    <div class="modal fade" id="modal_add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form class="m-t" role="form" action="add" method="post">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" >新增一条记录</h4>
                    </div>
                    <div class="modal-body">



                        <label class="" for="add_id">学号</label>
                        <div class="">
                            <input type="text" class="form-control" id="add_id" placeholder="学号" name="id">
                        </div>
                        <br>
                        <label class="" for="add_name">姓名</label>
                        <div class="">
                            <input type="text" class="form-control" id="add_name" placeholder="姓名" name="name">
                        </div>
                        <br>
                        <label class="" for="add_major">专业</label>
                        <div class="">
                            <input type="text" class="form-control" id="add_major" placeholder="专业" name="major">
                        </div>
                        <br>
                        <label class="" for="add_joinDate">入学日期</label>
                        <div class="input-group date myDatetimepicker" id = "add_joinDate">
                            <input type="text" class="form-control" name="入学日期">
                            <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="submit" class="btn btn-primary">保存</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
    <!--“修改”对话框-->
    <div class="modal fade" id="modal_edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">修改选中记录</h4>
                </div>
                <div class="modal-body">
                    <br>
                    <label class="" for="add_name">姓名</label>
                    <div class="">
                        <input type="text" class="form-control" id="edit_name">
                    </div>
                    <br>
                    <label class="" for="add_major">专业</label>
                    <div class="">
                        <input type="text" class="form-control" id="edit_major">
                    </div>
                    <br>
                    <label class="" for="add_joinDate">入学日期</label>
                    <div class="input-group date myDatetimepicker" id = "edit_joinDate">
                        <input type="text" class="form-control" >
                        <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary">保存</button>
                </div>
            </div>
        </div>
    </div>
    <!---->
    <br>
    <!--右边两个按钮-->
    <div class="columns columns-right btn-group pull-right">
        <!--重要！！-->
        <button class="btn btn-default" type="button" name="toggle" title="切换">
            <i class="glyphicon glyphicon-list-alt icon-list-alt"></i>
        </button>
        <div class="keep-open btn-group" title="列">
            <!--重要！！-->
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                <i class="glyphicon glyphicon-th icon-th"></i>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><label><input type="checkbox" data-field="name" value="1" checked="checked"> 姓名</label></li>
                <li><label><input type="checkbox" data-field="studentNo" value="2" checked="checked"> 学号</label></li>
                <li><label><input type="checkbox" data-field="major" value="3" checked="checked"> 专业</label></li>
                <li><label><input type="checkbox" data-field="enrollmentDate" value="4" checked="checked"> 入学时间</label></li>
            </ul>
        </div>
    </div>
    <!--表格-->
    <div >

        <table id = students>
            <thead>
            <tr>
                <th class="bs-checkbox "  data-field="0" tabindex="0"><div class="th-inner "><input name="btSelectAll" type="checkbox"></div><div class="fht-cell" style="width: 36px;"></div></th>
                <th >学号</th>
                <th >姓名</th>
                <th >专业</th>
                <th >入学日期</th>
            </tr>
            </thead>
            <tbody  id = "students_tbody">

            </tbody>
        </table>
    </div>
</div>

<!-- Mainly scripts -->
<script th:src="@{/js/jquery-2.1.1.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<script th:src="@{/js/bootstrap-table.js}"></script>
<script th:src="@{/js/bootstrap-datetimepicker.min.js}"></script>
<script th:src="@{/js/popper.min.js}"></script>
<script th:src="@{/js/bootstrap-table-zh-CN.js}"></script>
<script th:src="@{/js/bootstrap-datetimepicker.zh-CN.js}"></script>

<!-- Sweet alert -->
<script th:src="@{/js/plugins/sweetalert/sweetalert.min.js}"></script>
<script>
    loadStudents();

    setDateTimePicker();
    function setDateTime() {
    $(document).ready(function() {
        $('#students').bootstrapTable({
            pagination: "true"  ,
            pageSize:"5",
            pageList:[,10, 25, 50, 100]
        });
    })}
    function setDateTimePicker() {
        $(".myDatetimepicker").datetimepicker({
            format: 'yyyy-mm-dd' ,//显示格式
            language:  'zh-CN',
            todayHighlight: 1,//今天高亮
            minView: "month",//设置只显示到月份
            startView:2,
            autoclose: 1//选择后自动关闭
        });
    }
    function loadStudents() {
        $.ajax({
            type: "get",
            url: "/index/data",
            dataType: "json",
            success: function (data) {
                $.each(data, function (i, n) {
                    //<td th:text="${student.joinDate}">Onions</td>
                    var html = "<tr><td class=\"bs-checkbox \"><input data-index=\"0\" name=\"btSelectItem\" type=\"checkbox\"></td>"
                        +"<td> "+ n.id + "</td>";
                    html += "<td> "+ n.name + "</td>";
                    html += "<td> "+ n.major + "</td>";
                    html += "<td> "+ n.joinDate + "</td></tr>";
                    //alert(html);
                    $("#students_tbody").append(html);
                })
            },
            error: function () {
                alert("ajax error!!");
            }
        })
        setDateTime();
    }

</script>


</body>
</html>